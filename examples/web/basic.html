<body>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="http://vega.github.io/vega/vega.js" charset="utf-8"></script>
    <script src="http://vega.github.io/vega-lite/vega-lite.js" charset="utf-8"></script>
    <script src="http://vega.github.io/vega-editor/vendor/vega-embed.js" charset="utf-8"></script>
    
    <script src='basic.js'></script>
    <script>
    metis.simulate()
    </script>

    <div id="vis"></div>
    <script>
    let spec = `
{
  "description": "A simple bar chart with embedded data.",
  "data": {
    "values": [
      {"a": "A","b": 28}, {"a": "B","b": 55}, {"a": "C","b": 43},
      {"a": "D","b": 91}, {"a": "E","b": 81}, {"a": "F","b": 53},
      {"a": "G","b": 19}, {"a": "H","b": 87}, {"a": "I","b": 52}
    ]
  },
  "mark": "bar",
  "encoding": {
    "x": {"field": "a", "type": "ordinal"},
    "y": {"field": "b", "type": "quantitative"}
  }
}`
    let jspec = JSON.parse(spec)
    console.log(jspec.data)
    console.log(typeof jspec.data)
    let embedSpec = {
      mode: "vega-lite",
      spec: jspec
    }
    vg.embed("#vis", embedSpec, function(error, result) {

    })
    </script>
</body>